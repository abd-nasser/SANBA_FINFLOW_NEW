{% extends 'base.html' %}


{% block title %}
    Historique des demande de decaissement
{% endblock title %}



{% block content %}

    <label for="st">filtre les demande par status</label>
<select 
            hx-get="{% url 'secretaire_app:filter-demande-decaisse' %}"
            hx-target="#dmd_list"
            hx-trigger="change"
            name="status" 
            id="st">
    
    <option value="en_attente">En attente</option>
    <option value="approuvee_directeur">Approuv√© par directeur</option>
    <option value="approuvee_comptable">Apporouv√© par comptable</option>
    <option value="refusee_directeur">Refus√©e par directeur</option>
    <option value="refusee_comptable">Refus√©e par comtable</option>
    <option value="decaisse">D√©caiss√©</option>
    
</select>



<!-- 3Ô∏è‚É£ RECHERCHE TEXTE -->
                <div class="col-md-4">
                    <label class="form-label">üîç Recherche</label>
                    <input type="search"
                           name="q"
                           class="form-control"
                           placeholder="Nom demandeur, Approuvee/refuser..."
                           hx-get="{% url 'chantier_app:liste-chantier' %}"
                           hx-trigger="keyup changed delay:400ms"
                    >
                        
                </div>


<br>
<br>
<br>
<div id="dmd_list">
{% include 'partials/filter_demande.html' %}
</div>
<br>
<br>
<br>


<h3>Liste des employ√©s avec le total de somme d√©caiss√©</h3>
<table border=1>
    <thead>
        <tr>
            <th>Nom</th>
            <th>Somme Total d√©caisse</th>
            <th>nombre total de demande</th>
            <th>Total de demande approuv√©e</th>
            <th>Total de demande refus√©e</th>
        </tr>
    </thead>
    <tbody>
        
        {% for decaisse in total_decaisse %}
            <tr>
                <td>{{decaisse.nom__username}}</td>
                <td>{{ decaisse.total_decaisse }}</td>
                <td>{{decaisse.nombre_total}}</td>
                <td>{{decaisse.total_approuve}}</td>
                <td>{{ decaisse.total_refuse }}</td>
            </tr>
        {% endfor %}
            
    </tbody>
</table>
<script src="https://unpkg.com/htmx.org@1.9.6"></script>
{% endblock content %}