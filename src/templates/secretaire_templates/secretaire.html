{% extends 'base.html' %}


{% block title %}
    interface secretaire
{% endblock title %}

<!-- EN HAUT du template -->
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}


{% block content %}



<h2>Fond disponible: {{ fond }}</h2>

<a href="{% url 'auth_app:logout' %}">Deconnexion</a>
<a href="{% url 'secretaire_app:hist-demande-decaisse' %}">Historique des demandes</a>
<a href="{% url 'employee_app:employee-view' %}">Envoyer un rapport</a>

<div class='demande_decaisse'>
<h1>Soumettre demande de décaissement</h1>

    <form action="{% url 'secretaire_app:secretaire-view'%}" method="post">
        {% csrf_token %}
        {{form.as_p}}
        <input type="submit" value="Soumettre demande de decaissement">
    </form>

</div>

<div class='list_demande'>
  
    
    <h1>List et status de demande en cours</h1>
    <hr>
    <hr>
    {% for demande in list_demande %}
        <h3>{{ demande.nom  }}</h3>
        <h4><em>{{ demande.montant }}</em></h4>
        <h4>{{ demande.chantier}}</h4>
        <p>{{ demande.motif }}</p>

        <div class='status'>
        

            
        {% if demande.decaisse %}
        <h3 style='color:skyblue;'>Décaissée</h3>
            
        {% elif demande.status == 'approuvee_directeur' or demande.status == 'approuvee_comptable'  %}
       <h3 style='color:green;'>{{ demande.get_status_display}}</h3>
       <a href="{% url 'secretaire_app:valider-decaissement' demande.id %}">Validez déccaissement</a>
        

       {% elif demande.status == 'refusee_directeur' or demande.status == 'refusee_comptable' %}
        <h3 style='color:red;'>{{ demande.get_status_display}}</h3>
        {% elif demande.status == 'en_attente' %}
        <h3 style='color:orange;'>{{ demande.get_status_display }}</h3>
       {% endif %}
        </div>
        
        <hr>
        <hr>
    {% endfor %}
    
</div>
    
{% endblock content %}
    
    