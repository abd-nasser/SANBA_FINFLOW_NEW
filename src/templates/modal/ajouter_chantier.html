{% extends 'base.html' %}

{% block content %}
<div>
    <!-- üéØ TITRE DYNAMIQUE -->
    <h2>Nouveau Chantier - √âtape {{ wizard.steps.step1 }} sur {{ wizard.steps.count }}</h2>
    <!-- wizard.steps.step1 = √©tape actuelle (1, 2, 3...) -->
    <!-- wizard.steps.count = nombre total d'√©tapes (5) -->
    
    <!-- üéØ BARRE DE PROGRESSION -->
    <div>
        <progress value="{{ wizard.steps.step1 }}" max="{{ wizard.steps.count }}">
            {{ wizard.steps.step1 }}/{{ wizard.steps.count }}
        </progress>
    </div>
    
    <!-- üéØ FORMULAIRE PRINCIPAL -->
    <form method="post" novalidate>
        {% csrf_token %}
        
        <!-- üéØ FORMULAIRE DE GESTION (OBLIGATOIRE) -->
        {{ wizard.management_form }}
        <!-- Ce formulaire invisible garde la m√©moire des √©tapes -->
        
        <!-- üéØ BOUCLE SUR LES CHAMPS DU FORMULAIRE ACTUEL -->
        {% for field in wizard.form %}
        <div>
            <label>{{ field.label }}</label>
            {{ field }}  <!-- üéØ Affiche le champ (input, select, etc.) -->
            
            <!-- üéØ AFFICHE LES ERREURS -->
            {% if field.errors %}
            <div>
                {% for error in field.errors %}
                <p>{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
        
        <!-- üéØ BOUTONS DE NAVIGATION INTELLIGENTS -->
        <div>
            <!-- üéØ BOUTON "PR√âC√âDENT" (seulement si pas √† la 1√®re √©tape) -->
            {% if wizard.steps.prev %}
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">
                ‚Üê Pr√©c√©dent
            </button>
            <!-- name="wizard_goto_step" = dit au wizard d'aller √† une √©tape sp√©cifique -->
            <!-- value="{{ wizard.steps.prev }}" = l'√©tape pr√©c√©dente -->
            {% endif %}
            
            <!-- üéØ BOUTON PRINCIPAL -->
            {% if wizard.steps.next %}
            <!-- üéØ Si ce n'est pas la derni√®re √©tape -->
            <button type="submit">Suivant ‚Üí</button>
            {% else %}
            <!-- üéØ Si c'est la derni√®re √©tape -->
            <button type="submit">‚úÖ Cr√©er le chantier</button>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}